/* ===================================================
 * bootstrap-transition.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";function e(){t(o).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,o=e.attr("data-target");return o||(o=e.attr("href"),o=o&&/#/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),n=o&&t(o),n&&n.length||(n=e.parent()),n}var o="[data-toggle=dropdown]",s=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var o,s,i=t(this);if(!i.is(".disabled, :disabled"))return o=n(i),s=o.hasClass("open"),e(),s||o.toggleClass("open"),i.focus(),!1},keydown:function(e){var s,i,r,a,u;if(/(38|40|27)/.test(e.keyCode)&&(s=t(this),e.preventDefault(),e.stopPropagation(),!s.is(".disabled, :disabled"))){if(r=n(s),a=r.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&r.find(o).focus(),s.click();i=t("[role=menu] li:not(.divider):visible a",r),i.length&&(u=i.index(i.filter(":focus")),38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<i.length-1&&u++,~u||(u=0),i.eq(u).focus())}}};var i=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),o=n.data("dropdown");o||n.data("dropdown",o=new s(this)),"string"==typeof e&&o[e].call(n)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=i,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",o,s.prototype.toggle).on("keydown.dropdown.data-api",o+", [role=menu]",s.prototype.keydown)}(window.jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],o=[],s=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?o.push(e):s.push(e):n.push(e);return n.concat(o,s)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,o){return e=t(n.options.item).attr("data-value",o),e.find("a").html(n.highlighter(o)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var o=t(this),s=o.data("typeahead"),i="object"==typeof n&&n;s||o.data("typeahead",s=new e(this,i)),"string"==typeof n&&s[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),function(){window.Blog={Models:{},Collections:{},Views:{},Routers:{},init:function(){return new Blog.Routers.Posts,Backbone.history.start({pushState:!0})}},$(document).ready(function(){var t;return Blog.init(),t=$("#blog-search"),t.focus()})}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/index"]=function(t){t||(t={});var e,n=[],o=function(t){var o,s=n;return n=[],t.call(this),o=n.join(""),n=s,e(o)},s=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?r(t):""},i=t.safe,r=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},r||(r=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){!function(){var t,e,i,r;for(r=this.posts.models,e=0,i=r.length;i>e;e++)t=r[e],n.push('\n  <div class="post" id="post-'),n.push(s(t.get("id"))),n.push('">\n    <h1><a href="/posts/'),n.push(s(t.get("id"))),n.push('">'),n.push(s(t.get("title"))),n.push('</a></h1>\n    <div class="tags">\n    '),bubble_links?n.push("\n      <a class=\"bubble-link\">\n        <img src='http://hautaulogy.s3.amazonaws.com/bubble_chart.png'></img>\n      </a>\n      <strong>:</strong> \n    "):n.push("\n      <strong>Tags:</strong> \n    "),n.push("\n    "),n.push(t.get("keywords").map(function(t){return" <a href='/tag/"+t.name+"'>"+t.name+"</a>"})),n.push("\n    </div>\n    <h3>"),n.push(s(t.get("date_published"))),n.push('</h3>\n    <div class="content">'),n.push(t.get("content")),n.push('</div>\n    <h3 class="comments-link"><a href="/posts/'),n.push(s(t.get("id"))),n.push('">Post and Read Comments</a></h3>\n  </div>\n');n.push("\n"),jQuery.ready(function(){return o(function(){return n.push("\n  "),0===this.posts.models.length?n.push("\n    <h1>No posts here...</h1>\n  "):0===this.posts.models.length?n.push("\n    <h1>No posts match your search...</h1>\n\n\n\n"):void 0})})}.call(this)}.call(t),t.safe=i,t.escape=r,n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/show"]=function(t){t||(t={});var e,n=[],o=function(t){return t&&t.ecoSafe?t:"undefined"!=typeof t&&null!=t?i(t):""},s=t.safe,i=t.escape;return e=t.safe=function(t){if(t&&t.ecoSafe)return t;("undefined"==typeof t||null==t)&&(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){!function(){n.push('<div class="post" id="post-'),n.push(o(this.post.get("id"))),n.push('">\n  <h1><a href="/posts/'),n.push(o(this.post.get("id"))),n.push('">'),n.push(o(this.post.get("title"))),n.push('</a></h1>\n  <div class="tags">\n    '),bubble_links?n.push("\n      <a class=\"bubble-link\">\n        <img src='http://hautaulogy.s3.amazonaws.com/bubble_chart.png'></img>\n      </a>\n      <strong>:</strong> \n    "):n.push("\n      <strong>Tags:</strong> \n    "),n.push("\n    "),n.push(this.post.attributes.keywords.map(function(t){return" <a href='/tag/"+t+"'>"+t+"</a>"})),n.push("\n  </div>\n  <h3>"),n.push(o(this.post.get("date_published"))),n.push("</h3>\n  <div class='content'>"),n.push(this.post.get("content")),n.push("</div>\n  <div id=\"disqus_thread\"><a name=\"comments\"</div>\n  <script type=\"text/javascript\">\n      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\n      var disqus_shortname = 'hautaulogy'; // required: replace example with your forum shortname\n\n      /* * * DON'T EDIT BELOW THIS LINE * * */\n      (function() {\n          var dsq = document.createElement('script'); \n              dsq.type = 'text/javascript'; dsq.async = true;\n              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';\n              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n      })();\n  </script>\n  <noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"http://disqus.com\" class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">Disqus</span></a> \n</div>\n")}.call(this)}.call(t),t.safe=s,t.escape=i,n.join("")}}.call(this),function(){var t,e,n={}.hasOwnProperty,o=function(t,e){function o(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};Blog.Models.Post=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return o(n,e),n}(Backbone.Model),Blog.Models.Tag=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return o(n,t),n}(Backbone.Model)}.call(this),function(){var t,e,n={}.hasOwnProperty,o=function(t,e){function o(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};Blog.Collections.Posts=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.url="/api/posts",n.prototype.model=Blog.Models.Post,n}(Backbone.Collection),Blog.Collections.Tags=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.url="api/tags",n.prototype.model=Blog.Models.Tag,n}(Backbone.Collection)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};Blog.Views.PostsIndex=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.template=JST["posts/index"],o.prototype.initialize=function(){return this.collection.on("reset",this.render,this)},o.prototype.render=function(){return $(this.el).html(this.template({posts:this.collection})),$("pre code").each(function(t,e){return hljs.highlightBlock(e)}),this},o.prototype.events={"click .bubble-link":"bubbles_show"},o.prototype.bubbles_show=function(){return console.log("doing things"),$("#bubble-modal").modal("toggle")},o}(Backbone.View)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};Blog.Views.PostsShow=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.el="#feed",o.prototype.template=JST["posts/show"],o.prototype.initialize=function(){return this.model.bind("change",this.render,this)},o.prototype.render=function(){return $(this.el).html(this.template({post:this.model})),$("pre code").each(function(t,e){return hljs.highlightBlock(e)}),this},o.prototype.events={"click .bubble-link":"bubbles_show"},o.prototype.bubbles_show=function(){return $("#bubble-modal").modal("toggle")},o}(Backbone.View)}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};Blog.Routers.Posts=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}var s;return n(o,e),s=Blog.Collections.Posts.prototype.url,o.prototype.routes={"":"index","posts/:id":"show","page/:pageNumber":"page","search/:query":"search","tag/:keyword":"tag"},o.prototype.initialize=function(){return this.collection=new Blog.Collections.Posts},o.prototype.index=function(){var t;return this.collection.fetch(),t=new Blog.Views.PostsIndex({collection:this.collection}),$("#feed").html(t.render().el),$("#prev").css("visibility","hidden"),$("#next").attr("href","page/2")},o.prototype.page=function(t){var e,n,o,s;return e=new Blog.Collections.Posts,console.log(e),e.fetch({data:{page:t}}),s=new Blog.Views.PostsIndex({collection:e}),o=parseInt(t),n=parseInt($("#page-count").val()),$("#feed").html(s.render().el),0!==o-1?$("#prev").attr("href","/page/"+(o-1)):$(".prev").css("visibility","hidden"),o+1>n?$(".next").css("visibility","hidden"):$("#next").attr("href","/page/"+(o+1))},o.prototype.show=function(t){var e,n,o;return n=new Blog.Models.Post({id:t}),o=new Blog.Views.PostsShow({model:n}),e=new Blog.Collections.Posts([n]),n.fetch({success:function(e){var n,o,s;return window.foo=e,o=parseInt(t),n=e.attributes.next,s=e.attributes.previous,console.log(n),""!==n?$("#next").attr("href","/posts/"+n):$(".next").css("visibility","hidden"),""!==s?$("#prev").attr("href","/posts/"+s):$(".prev").css("visibility","hidden")}})},o.prototype.search=function(t){var e,n;return e=new Blog.Collections.Posts,e.fetch({url:s+"/search/"+t}),n=new Blog.Views.PostsIndex({collection:e}),$("#feed").html(n.render().el)},o.prototype.tag=function(t){var e,n;return e=new Blog.Collections.Posts,e.fetch({url:s+"/tag/"+t}),n=new Blog.Views.PostsIndex({collection:e}),$("#feed").html(n.render().el)},o}(Backbone.Router)}.call(this),/* =========================================================
 * bootstrap-modal.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var o=t(this),s=o.data("modal"),i=t.extend({},t.fn.modal.defaults,o.data(),"object"==typeof n&&n);s||o.data("modal",s=new e(this,i)),"string"==typeof n?s[n]():i.show&&s.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),i=s.data("modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());e.preventDefault(),s.modal(i).one("hide",function(){n.focus()})})}(window.jQuery),function(){$(document).ready(function(){var t,e,n;return e=function(t){return $.ajax({url:"/api/posts/"+t+"/edit",dataType:"json",success:function(e){var n,o,s,i,r;for($(".keyword").remove(),console.log(e),$("#edit-modal #title").val(e.title),$("#edit-modal #content").val(e.content),r=e.keywords,s=0,i=r.length;i>s;s++)n=r[s],o=$(jQuery.parseHTML('<div class="keyword" data-id="'+n.id+'"><span class="name">'+n.name+'</span><a class="close-keyword">  X</a></div>')),$("#edit-modal .tags").append(o);return e.published===!0&&($("#edit-modal #published")[0].checked=!0),$("#edit-modal form")[0].action=location.host+"/api/posts/"+t,$("#update-btn").data().id=t},complete:function(){return $(".close-keyword").on("click",function(){return $(this).parents(".keyword").remove()})}})},$("input#keywords").on("keydown",function(){var t,e;return 13===event.which?(e=$(this).val().trim(),t=$(this),$.ajax({url:"/admin/keyword",data:{name:e},success:function(n){var o;return $(this).val(""),o=$(jQuery.parseHTML('<div class="keyword" data-id="'+n.id+'"><span class="name">'+e+'</span><a class="close-keyword">  X</a></div>')),t.siblings(".tags").append(o).find(".close-keyword").on("click",function(){return $(this).parents(".keyword").remove()})}})):void 0}),$("#new-btn").on("click",function(){return $("#new-modal").modal("show")}),$(".edit-btn").on("click",function(){var t,n;return t=this.id.toString(),n=t.match(/[0-9]+/)[0],e(n),$("#edit-modal").modal("show")}),n=function(t,e){var n,o,s,i,r,a,u;return i="","update"===e?i="#edit-modal":"create"===e&&(i="#new-modal",t=""),n=$(i+" textarea#content").val(),a=$(i+" input#title").val(),r=null!=(u=$(i+" #published").is(":checked"))?u:{1:0},s=function(){var t,e,n,s;for(n=$(i+" .keyword"),s=[],t=0,e=n.length;e>t;t++)o=n[t],s.push($(o).attr("data-id"));return s}(),console.log(s),$.ajax({url:"/api/posts/"+e+"/"+t,dataType:"text",type:"POST",data:{post:{id:t,title:a,content:n,published:r,keywords:s}},success:function(t){return alert(t)},failure:function(t){return alert(t)}})},$("#create-btn").on("click",function(){return n(void 0,"create")}),$("#update-btn").on("click",function(){var t;return t=$("#update-btn").data().id,n(t,"update")}),t=function(t){return $.ajax({url:"/api/posts/"+t,type:"DELETE",success:function(t){return $("#post-id-"+t.id).fadeOut()}})},$(".delete-btn").on("click",function(){return $("#destroy-modal").attr("data-post",$(this).attr("data-post")),$("#destroy-modal").modal("show")}),$("#destroy-post-btn").on("click",function(){return t($("#destroy-modal").attr("data-post")),$("#destroy-modal").modal("hide")})})}.call(this);