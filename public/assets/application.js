/* ===================================================
 * bootstrap-transition.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||s.toggleClass("open"),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;u=i(r),a=u.hasClass("open");if(!a||a&&n.keyCode==27)return n.which==27&&u.find(t).focus(),r.click();s=e("[role=menu] li:not(.divider):visible a",u);if(!s.length)return;f=s.index(s.filter(":focus")),n.keyCode==38&&f>0&&f--,n.keyCode==40&&f<s.length-1&&f++,~f||(f=0),s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),function(){window.Blog={Models:{},Collections:{},Views:{},Routers:{},init:function(){return new Blog.Routers.Posts,console.log("stuff"),Backbone.history.start({pushState:!0})}},$(document).ready(function(){var e;return Blog.init(),e=$("#blog-search"),e.focus()}),$("#tag-cloud").click(function(e){return e.preventDefault(),$(this).tab("show")})}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/index"]=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,i,s,o;o=this.posts.models;for(i=0,s=o.length;i<s;i++)e=o[i],t.push('\n  <div class="post" id="post-'),t.push(r(e.get("id"))),t.push('">\n    <h1><a href="/posts/'),t.push(r(e.get("id"))),t.push('">'),t.push(r(e.get("title"))),t.push('</a></h1>\n    <div class="tags"><strong>Tags:</strong> \n      '),t.push(e.get("keywords").map(function(e){return" <a href='/tag/"+e.name+"'>"+e.name+"</a>"})),t.push("\n    </div>\n    <h3>"),t.push(r(e.get("date_published"))),t.push('</h3>\n    <div class="content">'),t.push(e.get("content")),t.push('</div>\n    <h3 class="comments-link"><a href="/posts/'),t.push(r(e.get("id"))),t.push('">Post and Read Comments</a></h3>\n  </div>\n');t.push("\n"),jQuery.ready(function(){return n(function(){t.push("\n  ");if(this.posts.models.length===0)return t.push("\n    <h1>No posts here...</h1>\n  ");if(this.posts.models.length===0)return t.push("\n    <h1>No posts match your search...</h1>\n\n\n\n")})})}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["posts/show"]=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){t.push('<div class="post" id="post-'),t.push(r(this.post.get("id"))),t.push('">\n  <h1><a href="/posts/'),t.push(r(this.post.get("id"))),t.push('">'),t.push(r(this.post.get("title"))),t.push('</a></h1>\n  <div class="tags">\n    <strong>Tags:</strong>\n    '),t.push(this.post.attributes.keywords.map(function(e){return" <a href='/tag/"+e+"'>"+e+"</a>"})),t.push("\n  </div>\n  <h3>"),t.push(r(this.post.get("date_published"))),t.push("</h3>\n  <div class='content'>"),t.push(this.post.get("content")),t.push("</div>\n  <div id=\"disqus_thread\"><a name=\"comments\"</div>\n  <script type=\"text/javascript\">\n      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\n      var disqus_shortname = 'hautaulogy'; // required: replace example with your forum shortname\n\n      /* * * DON'T EDIT BELOW THIS LINE * * */\n      (function() {\n          var dsq = document.createElement('script'); \n              dsq.type = 'text/javascript'; dsq.async = true;\n              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';\n              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n      })();\n  </script>\n  <noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"http://disqus.com\" class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">Disqus</span></a> \n</div>\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}}.call(this),function(){var e,t,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Blog.Models.Post=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments),e}return r(n,t),n}(Backbone.Model),Blog.Models.Tag=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments),t}return r(n,e),n}(Backbone.Model)}.call(this),function(){var e,t,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Blog.Collections.Posts=function(t){function n(){return e=n.__super__.constructor.apply(this,arguments),e}return r(n,t),n.prototype.url="/api/posts",n.prototype.model=Blog.Models.Post,n}(Backbone.Collection),Blog.Collections.Tags=function(e){function n(){return t=n.__super__.constructor.apply(this,arguments),t}return r(n,e),n.prototype.url="api/tags",n.prototype.model=Blog.Models.Tag,n}(Backbone.Collection)}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Blog.Views.PostsIndex=function(t){function r(){return e=r.__super__.constructor.apply(this,arguments),e}return n(r,t),r.prototype.template=JST["posts/index"],r.prototype.initialize=function(){return this.collection.on("reset",this.render,this)},r.prototype.render=function(){return $(this.el).html(this.template({posts:this.collection})),Rainbow.color(),this},r}(Backbone.View)}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Blog.Views.PostsShow=function(t){function r(){return e=r.__super__.constructor.apply(this,arguments),e}return n(r,t),r.prototype.el="#feed",r.prototype.template=JST["posts/show"],r.prototype.initialize=function(){return this.model.bind("change",this.render,this)},r.prototype.render=function(){return $(this.el).html(this.template({post:this.model})),Rainbow.color(),this},r}(Backbone.View)}.call(this),function(){var e,t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Blog.Routers.Posts=function(t){function i(){return e=i.__super__.constructor.apply(this,arguments),e}var r;return n(i,t),r=Blog.Collections.Posts.prototype.url,i.prototype.routes={"":"index","posts/:id":"show","page/:pageNumber":"page","search/:query":"search","tag/:keyword":"tag"},i.prototype.initialize=function(){return this.collection=new Blog.Collections.Posts},i.prototype.index=function(){var e;return this.collection.fetch(),e=new Blog.Views.PostsIndex({collection:this.collection}),$("#feed").html(e.render().el),$("#prev").css("visibility","hidden"),$("#next").attr("href","page/2")},i.prototype.page=function(e){var t,n,r,i;return t=new Blog.Collections.Posts,console.log(t),t.fetch({data:{page:e}}),i=new Blog.Views.PostsIndex({collection:t}),r=parseInt(e),n=parseInt($("#page-count").val()),$("#feed").html(i.render().el),r-1!==0?$("#prev").attr("href","/page/"+(r-1)):$(".prev").css("visibility","hidden"),r+1>n?$(".next").css("visibility","hidden"):$("#next").attr("href","/page/"+(r+1))},i.prototype.show=function(e){var t,n,r;return n=new Blog.Models.Post({id:e}),r=new Blog.Views.PostsShow({model:n}),t=new Blog.Collections.Posts([n]),n.fetch({success:function(t){var n,r,i;return window.foo=t,r=parseInt(e),n=t.attributes.next,i=t.attributes.previous,console.log(n),n!==""?$("#next").attr("href","/posts/"+n):$(".next").css("visibility","hidden"),i!==""?$("#prev").attr("href","/posts/"+i):$(".prev").css("visibility","hidden")}})},i.prototype.search=function(e){var t,n;return t=new Blog.Collections.Posts,t.fetch({url:r+"/search/"+e}),n=new Blog.Views.PostsIndex({collection:t}),$("#feed").html(n.render().el)},i.prototype.tag=function(e){var t,n;return t=new Blog.Collections.Posts,t.fetch({url:r+"/tag/"+e}),n=new Blog.Views.PostsIndex({collection:t}),$("#feed").html(n.render().el)},i}(Backbone.Router)}.call(this),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),function(){$(document).ready(function(){var e,t,n;return t=function(e){return $.ajax({url:"/api/posts/"+e+"/edit",dataType:"json",success:function(t){$("#edit-modal #title").val(t.title),$("#edit-modal #content").val(t.content),$("#edit-modal #keywords").val(t.keywords.map(function(e){return" "+e})),$("#edit-modal form")[0].action=location.host+"/api/posts/"+e,$("#update-btn").data().id=e;if(t.published===!0)return $("#edit-modal #published")[0].checked=!0}})},$("#new-btn").on("click",function(){return $("#new-modal").modal("show")}),$(".edit-btn").on("click",function(){var e,n;return e=this.id.toString(),n=e.match(/[0-9]+/)[0],t(n),$("#edit-modal").modal("show")}),n=function(e){var t,n,r,i;return t=$("#edit-modal textarea#content").val(),i=$("#edit-modal input#title").val(),r=$("#edit-modal #published").val(),n=$("#edit-modal #keywords").val(),$.ajax({url:"/api/posts/"+e+"/update",dataType:"text",type:"POST",data:{post:{id:e,title:i,content:t,published:r,keywords:n}},success:function(e){return console.log(),alert(e)},failure:function(e){return alert(e)}})},$("#update-btn").on("click",function(){var e;return e=$("#update-btn").data().id,n(e)}),e=function(e){return $.ajax({url:"/api/posts/"+e,type:"DELETE",success:function(e){return $("#post-id-"+e.id).fadeOut()}})},$(".delete-btn").on("click",function(){return $("#destroy-modal").attr("data-post",$(this).attr("data-post")),$("#destroy-modal").modal("show")}),$("#destroy-post-btn").on("click",function(){return e($("#destroy-modal").attr("data-post")),$("#destroy-modal").modal("hide")})})}.call(this);